# GitLab Hooks y Flujo de Trabajo - Factura Movil POS Web

##  Flujo de Trabajo Recomendado

### **Branch Strategy**
- **`main`**: Branch de producci贸n (protegido)
- **`develop`**: Branch de desarrollo (activo)
- **`feature/*`**: Branches para nuevas funcionalidades
- **`hotfix/*`**: Branches para correcciones urgentes

### **Git Hooks Recomendados**

#### **Pre-commit Hook (Local)**
```bash
#!/bin/sh
# .git/hooks/pre-commit

# Verificar que el c贸digo compile
npm run build

# Ejecutar tests b谩sicos
npm run test:unit

# Verificar linting
npm run lint
```

#### **Pre-push Hook (Local)**
```bash
#!/bin/sh
# .git/hooks/pre-push

# Ejecutar tests completos
npm run test

# Verificar coverage m铆nimo
npm run test:coverage

# Verificar build de producci贸n
npm run build
```

##  Pipeline de CI/CD

### **Stages del Pipeline**
1. **Test**: Instalaci贸n de dependencias y ejecuci贸n de tests
2. **Build**: Compilaci贸n de la aplicaci贸n
3. **Deploy**: Despliegue a staging/producci贸n

### **Reglas de Deployment**
- **Staging**: Autom谩tico desde `develop`
- **Producci贸n**: Manual desde `main` (requiere aprobaci贸n)

##  Checklist de Merge Request

### **Antes de Crear MR**
- [ ] Tests pasando localmente
- [ ] Linting sin errores
- [ ] Build exitoso
- [ ] Coverage m铆nimo 80%
- [ ] Documentaci贸n actualizada

### **Durante la Revisi贸n**
- [ ] Code review aprobado
- [ ] Tests de CI pasando
- [ ] Security scan limpio
- [ ] Performance aceptable

##  Configuraci贸n de GitLab

### **Variables de Entorno**
- `NODE_VERSION`: Versi贸n de Node.js
- `AWS_ACCESS_KEY_ID`: Credenciales AWS
- `AWS_SECRET_ACCESS_KEY`: Credenciales AWS
- `STAGING_URL`: URL de staging
- `PRODUCTION_URL`: URL de producci贸n

### **Protecci贸n de Branches**
- **`main`**: Solo merge requests aprobados
- **`develop`**: Merge requests con tests pasando

##  M茅tricas de Calidad

### **Coverage M铆nimo**
- **Unit Tests**: 80%
- **Integration Tests**: 70%
- **E2E Tests**: 60%

### **Performance**
- **Build Time**: < 5 minutos
- **Test Time**: < 3 minutos
- **Deploy Time**: < 10 minutos

##  Manejo de Errores

### **Fallback Strategy**
1. **Rollback autom谩tico** si tests fallan
2. **Notificaci贸n inmediata** en caso de error
3. **Logs detallados** para debugging

### **Escalaci贸n**
1. **Desarrollador**: Primera respuesta (15 min)
2. **Tech Lead**: Escalaci贸n (30 min)
3. **DevOps**: Emergencia (1 hora)
